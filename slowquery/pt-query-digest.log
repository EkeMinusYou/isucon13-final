
# 23.4s user time, 100ms system time, 35.45M rss, 390.13G vsz
# Current date: Sat Nov 25 12:38:21 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 592.29k total, 111 unique, 2.59k QPS, 1.84x concurrency _______
# Time range: 2023-11-25T03:33:19 to 2023-11-25T03:37:08
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           422s     1us   632ms   711us     3ms     3ms    69us
# Lock time          794ms       0    98ms     1us     1us   138us       0
# Rows sent        234.42k       0   7.32k    0.41    0.99   16.63       0
# Rows examine      90.71M       0  14.03k  160.59   1.04k  647.90       0
# Query size        59.96M       5   1.94M  106.15  299.03   4.12k   31.70

# Profile
# Rank Query ID                            Response time Calls  R/Call V/M
# ==== =================================== ============= ====== ====== ===
#    1 0xDA556F9115773A1A99AA0165670CE848  61.4806 14.6% 177406 0.0003  0.01 ADMIN PREPARE
#    2 0x42EF7D7D98FBCC9723BF896EBFC51D24  50.0743 11.9%   6561 0.0076  0.01 SELECT records
#    3 0xF1B8EF06D6CA63B24BFF433E06CCEB22  37.5787  8.9%   3817 0.0098  0.01 SELECT users livestreams livecomments
#    4 0xDB74D52D39A7090F224C4DEEAF3028C9  36.1470  8.6%   3819 0.0095  0.01 SELECT users livestreams reactions
#    5 0x38BC86A45F31C6B1EE324671506C898A  29.0741  6.9%  13707 0.0021  0.00 SELECT themes
#    6 0x3D83BC87F3B3A00D571FFC8104A6E50C  27.9596  6.6%   4946 0.0057  0.01 SELECT records
#    7 0x59F1B6DD8D9FEC059E55B3BFD624E8C3  18.9504  4.5%    836 0.0227  0.01 SELECT reservation_slots
#    8 0x4ADE2DC90689F1C4891749AF54FB8D14  18.8611  4.5%  37344 0.0005  0.00 DELETE SELECT livecomments
#    9 0x64CC8A4E8E4B390203375597CE4D611F  16.4590  3.9%    335 0.0491  0.01 SELECT ng_words
#   10 0x84B457C910C4A79FC9EBECB8B1065C66  14.6745  3.5%  16554 0.0009  0.00 SELECT icons
#   11 0xFBC5564AE716EAE82F20BFB45F6C37E7  12.4216  2.9%  33954 0.0004  0.00 SELECT tags
#   12 0xFFFCA4D67EA0A788813031B8BBC3B329  11.3529  2.7%   2771 0.0041  0.01 COMMIT
#   13 0xDFFCC1D78939C4D781C7C58349101F50   8.5829  2.0%   2000 0.0043  0.00 INSERT users
#   14 0xD2A0864774622BA36F6557496405CF75   8.3766  2.0%   2227 0.0038  0.00 INSERT themes
#   15 0x22279D81D51006139E0C76405B54C261   6.5264  1.5%   7726 0.0008  0.00 SELECT domains domainmetadata
#   16 0x8F7679D452333ED3C7D60D22131CEFD4   5.0688  1.2%  21940 0.0002  0.00 ADMIN RESET STMT
#   17 0xEA1E6309EEEFF9A6831AD2FB940FC23C   5.0315  1.2%  13475 0.0004  0.00 SELECT users
#   18 0xA3401CA3ABCC04C3AB221DB8AD5CBF26   5.0138  1.2%     98 0.0512  0.02 UPDATE reservation_slots
#   19 0xF7144185D9A142A426A36DC55C1D2623   4.5177  1.1%   8642 0.0005  0.00 SELECT livestream_tags
#   20 0xFD38427AE3D09E3883A680F7BAF95D3A   4.2748  1.0%  14992 0.0003  0.00 SELECT livestreams livecomments
# MISC 0xMISC                              39.1434  9.3% 219141 0.0002   0.0 <91 ITEMS>

# Query 1: 848.83 QPS, 0.29x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 49435912
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:33:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         29  177406
# Exec time     14     61s    19us   468ms   346us     1ms     2ms    84us
# Lock time      0    15us       0     7us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     8   5.08M      30      30      30      30       0      30
# String:
# Databases    isupipe (176027/99%), isudns (1379/0%)
# Hosts        localhost
# Users        isucon (176027/99%), isudns (1379/0%)
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###########################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
administrator command: Prepare\G

# Query 2: 65.61 QPS, 0.50x concurrency, ID 0x42EF7D7D98FBCC9723BF896EBFC51D24 at byte 129766316
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:35:28 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    6561
# Exec time     11     50s   716us    65ms     8ms    20ms     7ms     6ms
# Lock time      3    31ms       0     7ms     4us     1us   101us     1us
# Rows sent      0   1.58k       0       1    0.25    0.99    0.43       0
# Rows examine   9   8.75M   1.25k   1.47k   1.37k   1.46k   63.98   1.33k
# Query size     1 902.42k     129     219  140.84  158.58   11.28  136.99
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms  ##########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and name='*.u.isucon.dev' and domain_id=2\G

# Query 3: 42.89 QPS, 0.42x concurrency, ID 0xF1B8EF06D6CA63B24BFF433E06CCEB22 at byte 106394980
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3817
# Exec time      8     38s     1ms    80ms    10ms    34ms    12ms     2ms
# Lock time      1     9ms       0     1ms     2us     1us    28us     1us
# Rows sent      1   3.73k       1       1       1       1       0       1
# Rows examine   8   7.75M   1.96k   2.42k   2.08k   2.38k  166.19   1.96k
# Query size     1 614.31k     163     166  164.80  158.58       0  158.58
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(l2.tip), 0) FROM users u
		INNER JOIN livestreams l ON l.user_id = u.id	
		INNER JOIN livecomments l2 ON l2.livestream_id = l.id
		WHERE u.id = 340\G

# Query 4: 42.91 QPS, 0.41x concurrency, ID 0xDB74D52D39A7090F224C4DEEAF3028C9 at byte 108609560
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3819
# Exec time      8     36s     1ms    79ms     9ms    33ms    11ms     2ms
# Lock time      1    11ms       0     3ms     2us     1us    46us     1us
# Rows sent      1   3.73k       1       1       1       1       0       1
# Rows examine   8   7.76M   1.96k   2.40k   2.08k   2.38k  154.28   1.96k
# Query size     0 540.04k     143     146  144.80  143.84    0.87  143.84
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reactions'\G
#    SHOW CREATE TABLE `isupipe`.`reactions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM users u
		INNER JOIN livestreams l ON l.user_id = u.id
		INNER JOIN reactions r ON r.livestream_id = l.id
		WHERE u.id = 297\G

# Query 5: 154.01 QPS, 0.33x concurrency, ID 0x38BC86A45F31C6B1EE324671506C898A at byte 76384111
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   13707
# Exec time      6     29s   244us    34ms     2ms     7ms     2ms     1ms
# Lock time      5    43ms       0     8ms     3us     1us    80us     1us
# Rows sent      5  13.39k       1       1       1       1       0       1
# Rows examine  16  14.56M    1000   1.20k   1.09k   1.14k   69.59   1.04k
# Query size     0 546.64k      38      41   40.84   40.45    0.69   40.45
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #############################################################
#   1ms  ################################################################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM themes WHERE user_id = 1031\G

# Query 6: 23.67 QPS, 0.13x concurrency, ID 0x3D83BC87F3B3A00D571FFC8104A6E50C at byte 109455787
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:33:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4946
# Exec time      6     28s   672us    72ms     6ms    17ms     6ms     3ms
# Lock time      2    19ms       0     3ms     3us     1us    53us     1us
# Rows sent      1   2.50k       0       1    0.52    0.99    0.50    0.99
# Rows examine   7   6.59M   1.25k   1.47k   1.36k   1.46k   64.68   1.33k
# Query size     1 649.47k     126     218  134.46  151.03   10.57  124.25
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us
# 100us  ##
#   1ms  ################################################################
#  10ms  ################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'records'\G
#    SHOW CREATE TABLE `isudns`.`records`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT content,ttl,prio,type,domain_id,disabled,name,auth FROM records WHERE disabled=0 and type='SOA' and name='u.isucon.dev'\G

# Query 7: 9.39 QPS, 0.21x concurrency, ID 0x59F1B6DD8D9FEC059E55B3BFD624E8C3 at byte 162349108
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     836
# Exec time      4     19s     2ms    79ms    23ms    48ms    14ms    21ms
# Lock time      0     3ms       0     2ms     4us     1us    67us     1us
# Rows sent      0     836       1       1       1       1       0       1
# Rows examine   7   6.98M   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0  70.21k      86      86      86      86       0      86
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT slot FROM reservation_slots WHERE start_at = 1701399600 AND end_at = 1701403200\G

# Query 8: 612.20 QPS, 0.31x concurrency, ID 0x4ADE2DC90689F1C4891749AF54FB8D14 at byte 96206468
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:36:07 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   37344
# Exec time      4     19s    46us    33ms   505us     2ms   949us   167us
# Lock time     18   146ms       0    11ms     3us     1us   104us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  72.95k       2       4    2.00    1.96    0.02    1.96
# Query size    19  11.78M     263     502  330.84  363.48   26.81  313.99
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################################
# 100us  ################################################################
#   1ms  ################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
DELETE FROM livecomments
			WHERE
			id = 262 AND
			livestream_id = 7527 AND
			(SELECT COUNT(*)
			FROM
			(SELECT '今日の選曲が特に好き！' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '幻現書', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  livecomments
			WHERE
			id = 262 AND
			livestream_id = 7527 AND
			(SELECT COUNT(*)
			FROM
			(SELECT '今日の選曲が特に好き！' AS text) AS texts
			INNER JOIN
			(SELECT CONCAT('%', '幻現書', '%')	AS pattern) AS patterns
			ON texts.text LIKE patterns.pattern) >= 1\G

# Query 9: 4.29 QPS, 0.21x concurrency, ID 0x64CC8A4E8E4B390203375597CE4D611F at byte 102466058
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:35:49 to 2023-11-25T03:37:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     335
# Exec time      3     16s     4ms   122ms    49ms    82ms    19ms    48ms
# Lock time      0   562us       0   166us     1us     1us     9us     1us
# Rows sent      0     119       0       2    0.36    0.99    0.50       0
# Rows examine   5   4.58M  14.00k  14.03k  14.01k  13.78k       0  13.78k
# Query size     0  32.38k      97      99   98.99   97.36    0.36   97.36
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ##
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'ng_words'\G
#    SHOW CREATE TABLE `isupipe`.`ng_words`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT id, user_id, livestream_id, word FROM ng_words WHERE user_id = 1025 AND livestream_id = 7529\G

# Query 10: 186 QPS, 0.16x concurrency, ID 0x84B457C910C4A79FC9EBECB8B1065C66 at byte 122806083
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16554
# Exec time      3     15s    57us    40ms   886us     3ms     2ms   348us
# Lock time      4    38ms       0     3ms     2us     1us    38us     1us
# Rows sent      5  13.09k       0       1    0.81    0.99    0.39    0.99
# Rows examine   0  13.09k       0       1    0.81    0.99    0.39    0.99
# Query size     1 708.46k      41      44   43.82   42.48    0.26   42.48
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###########
# 100us  ################################################################
#   1ms  ###########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'icons'\G
#    SHOW CREATE TABLE `isupipe`.`icons`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT image FROM icons WHERE user_id = 1013\G

# Query 11: 499.32 QPS, 0.18x concurrency, ID 0xFBC5564AE716EAE82F20BFB45F6C37E7 at byte 168594123
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:36:00 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   33954
# Exec time      2     12s    32us    25ms   365us     1ms   837us   119us
# Lock time      9    78ms       0     4ms     2us     1us    32us     1us
# Rows sent     14  33.16k       1       1       1       1       0       1
# Rows examine   0  33.16k       1       1       1       1       0       1
# Query size     1   1.03M      31      33   31.94   31.70    0.44   31.70
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'tags'\G
#    SHOW CREATE TABLE `isupipe`.`tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM tags WHERE id = 95\G

# Query 12: 13.32 QPS, 0.05x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 66882294
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-25T03:33:40 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2771
# Exec time      2     11s    19us    66ms     4ms    12ms     5ms     4ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  16.24k       6       6       6       6       0       6
# String:
# Databases    isupipe (2542/91%), isudns (229/8%)
# Hosts        localhost
# Users        isucon (2542/91%), isudns (229/8%)
# Query_time distribution
#   1us
#  10us  ###########################
# 100us  ############
#   1ms  ################################################################
#  10ms  #########
# 100ms
#    1s
#  10s+
commit\G

# Query 13: 15.50 QPS, 0.07x concurrency, ID 0xDFFCC1D78939C4D781C7C58349101F50 at byte 595384
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:33:28 to 2023-11-25T03:35:37
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2000
# Exec time      2      9s     2ms    33ms     4ms     6ms     1ms     4ms
# Lock time      0     2ms       0    14us     1us     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 802.36k     192     463  410.81  420.77   16.87  400.73
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
INSERT INTO users (id, name, display_name, description, password) VALUES (669, 'omatsumoto0', 'たんたんたんご', '普段YouTuberをしています。\nよろしくおねがいします！\n\n連絡は以下からお願いします。\n\nウェブサイト: http://omatsumoto.example.com/\nメールアドレス: omatsumoto@example.com\n', '$2a$04$NTzkO97hOWpI1U3mx.odt.LreHylHcR9RjZkBPhSqbnJ.U6jOhI2a')\G

# Query 14: 10.12 QPS, 0.04x concurrency, ID 0xD2A0864774622BA36F6557496405CF75 at byte 807350
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:33:28 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2227
# Exec time      1      8s    55us    24ms     4ms     5ms     1ms     4ms
# Lock time      0     2ms       0    42us     1us     1us     1us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 126.22k      55      60   58.04   56.92    0.83   56.92
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ###
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'themes'\G
#    SHOW CREATE TABLE `isupipe`.`themes`\G
INSERT INTO themes (user_id, dark_mode) VALUES (911, true)\G

# Query 15: 77.26 QPS, 0.07x concurrency, ID 0x22279D81D51006139E0C76405B54C261 at byte 101548771
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:35:28 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    7726
# Exec time      1      7s    85us    39ms   844us     3ms     2ms   273us
# Lock time      5    44ms     1us     3ms     5us     1us    76us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 860.12k     114     114     114     114       0     114
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domains'\G
#    SHOW CREATE TABLE `isudns`.`domains`\G
#    SHOW TABLE STATUS FROM `isudns` LIKE 'domainmetadata'\G
#    SHOW CREATE TABLE `isudns`.`domainmetadata`\G
# EXPLAIN /*!50100 PARTITIONS*/
select kind,content from domains, domainmetadata where domainmetadata.domain_id=domains.id and name='u.isucon.dev'\G

# Query 16: 104.98 QPS, 0.02x concurrency, ID 0x8F7679D452333ED3C7D60D22131CEFD4 at byte 73463186
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:33:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   21940
# Exec time      1      5s     9us    38ms   231us   881us   951us    40us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 707.05k      33      33      33      33       0      33
# String:
# Databases    isudns
# Hosts        localhost
# Users        isudns
# Query_time distribution
#   1us  #
#  10us  ################################################################
# 100us  #################
#   1ms  ###
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Reset stmt\G

# Query 17: 151.40 QPS, 0.06x concurrency, ID 0xEA1E6309EEEFF9A6831AD2FB940FC23C at byte 165506606
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   13475
# Exec time      1      5s    43us    24ms   373us     1ms   754us   131us
# Lock time      5    42ms       0     8ms     3us     1us    82us     1us
# Rows sent      5  13.16k       1       1       1       1       0       1
# Rows examine   0  13.16k       1       1       1       1       0       1
# Query size     0 458.40k      32      35   34.84   34.95    0.68   34.95
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################################################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'users'\G
#    SHOW CREATE TABLE `isupipe`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = 1093\G

# Query 18: 1.10 QPS, 0.06x concurrency, ID 0xA3401CA3ABCC04C3AB221DB8AD5CBF26 at byte 124276527
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      98
# Exec time      1      5s     5ms   148ms    51ms   110ms    35ms    56ms
# Lock time      0    97us       0     2us       0     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0 838.26k   8.55k   8.55k   8.55k   8.55k       0   8.55k
# Query size     0   9.38k      98      98      98      98       0      98
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ###########################
#  10ms  ################################################################
# 100ms  ###########
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'reservation_slots'\G
#    SHOW CREATE TABLE `isupipe`.`reservation_slots`\G
UPDATE reservation_slots SET slot = slot - 1 WHERE start_at >= 1701205200 AND end_at <= 1701252000\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  slot = slot - 1 from reservation_slots where  start_at >= 1701205200 AND end_at <= 1701252000\G

# Query 19: 97.10 QPS, 0.05x concurrency, ID 0xF7144185D9A142A426A36DC55C1D2623 at byte 141421044
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:35:39 to 2023-11-25T03:37:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8642
# Exec time      1      5s    65us    29ms   522us     2ms     1ms   167us
# Lock time      3    24ms       0     5ms     2us     1us    57us     1us
# Rows sent     14  33.17k       0      11    3.93    4.96    1.71    4.96
# Rows examine   0  33.17k       0      11    3.93    4.96    1.71    4.96
# Query size     0 472.35k      53      56   55.97   54.21    0.14   54.21
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################
# 100us  ################################################################
#   1ms  ##############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestream_tags'\G
#    SHOW CREATE TABLE `isupipe`.`livestream_tags`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM livestream_tags WHERE livestream_id = 7532\G

# Query 20: 881.88 QPS, 0.25x concurrency, ID 0xFD38427AE3D09E3883A680F7BAF95D3A at byte 17691805
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-25T03:35:42 to 2023-11-25T03:35:59
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14992
# Exec time      1      4s   263us     5ms   285us   301us    42us   273us
# Lock time      1    15ms       0    28us       0     1us       0     1us
# Rows sent      6  14.64k       1       1       1       1       0       1
# Rows examine  15  14.33M    1001    1003    1002  964.41       0  964.41
# Query size     2   1.71M     117     120  119.85  118.34    0.64  118.34
# String:
# Databases    isupipe
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livestreams'\G
#    SHOW CREATE TABLE `isupipe`.`livestreams`\G
#    SHOW TABLE STATUS FROM `isupipe` LIKE 'livecomments'\G
#    SHOW CREATE TABLE `isupipe`.`livecomments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT IFNULL(SUM(l2.tip), 0) FROM livestreams l INNER JOIN livecomments l2 ON l.id = l2.livestream_id WHERE l.id = 3695\G
